{% extends 'partials/base.html' %}
{% load static %}

{% block title %}{{ titulo }}{% endblock %}

{% block content %}
<div class="page-content">
    <div class="container-fluid">
        <!-- start page title -->
        <div class="row">
            <div class="col-12">
                <div class="page-title-box d-sm-flex align-items-center justify-content-between">
                    <h4 class="mb-sm-0">{{ titulo }}</h4>
                    <div class="page-title-right">
                        <ol class="breadcrumb m-0">
                            <li class="breadcrumb-item"><a href="{% url 'dashboard_analytics' %}">Dashboard</a></li>
                            <li class="breadcrumb-item active">Reportes</li>
                        </ol>
                    </div>
                </div>
            </div>
        </div>
        <!-- end page title -->

        {% if messages %}
            {% for message in messages %}
                <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
                    {{ message }}
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                </div>
            {% endfor %}
        {% endif %}

        <!-- Filtro por App -->
        <div class="row mb-3">
            <div class="col-12">
                <div class="card">
                    <div class="card-body">
                        <div class="d-flex align-items-center gap-2">
                            <span class="fw-semibold">Filtrar por módulo:</span>
                            <a href="{% url 'reportes:dashboard' %}" class="btn btn-sm btn-outline-primary {% if app == 'todas' or not app %}active{% endif %}">
                                Todas
                            </a>
                            <a href="{% url 'reportes:dashboard_app' 'bodega' %}" class="btn btn-sm btn-outline-primary {% if app == 'bodega' %}active{% endif %}">
                                Bodega
                            </a>
                            <a href="{% url 'reportes:dashboard_app' 'compras' %}" class="btn btn-sm btn-outline-primary {% if app == 'compras' %}active{% endif %}">
                                Compras
                            </a>
                            <a href="{% url 'reportes:dashboard_app' 'solicitudes' %}" class="btn btn-sm btn-outline-primary {% if app == 'solicitudes' %}active{% endif %}">
                                Solicitudes
                            </a>
                            <a href="{% url 'reportes:dashboard_app' 'activos' %}" class="btn btn-sm btn-outline-primary {% if app == 'activos' %}active{% endif %}">
                                Activos
                            </a>
                            <a href="{% url 'reportes:dashboard_app' 'bajas' %}" class="btn btn-sm btn-outline-primary {% if app == 'bajas' %}active{% endif %}">
                                Bajas
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- SECCIÓN: BODEGA -->
        {% if stats_bodega %}
            {% if app == 'bodega' or app == 'todas' %}
        <div class="row mb-5">
            <div class="col-12">
                <div class="report-section-header report-header-bodega">
                    <div class="d-flex align-items-center">
                        <div class="report-header-icon">
                            <i class="ri-archive-line"></i>
                        </div>
                        <div>
                            <h3 class="report-section-title mb-0">Reportes de Bodega</h3>
                            <p class="report-section-subtitle mb-0">Estadísticas completas del módulo de bodega</p>
                        </div>
                    </div>
                </div>
                <!-- Accesos directos a reportes de Bodega -->
                <div class="mb-3">
                    <div class="d-flex flex-wrap gap-2">
                        <a href="{% url 'reportes:articulos_sin_movimiento' %}" class="btn btn-sm btn-outline-primary">
                            <i class="ri-time-line me-1"></i> Artículos sin movimiento
                        </a>
                    </div>
                </div>
            </div>
        </div>
        <div class="row mb-4">
            <div class="col-lg-3 col-sm-6">
                <div class="card report-card-modern">
                    <div class="card-body p-0 d-flex">
                        <div class="report-icon-section" style="--tb-primary: #405189;" data-color="primary">
                            <i class="ri-box-3-line report-icon-large"></i>
                        </div>
                        <div class="report-content-section flex-grow-1">
                            <div class="d-flex justify-content-between align-items-start p-3">
                                <div>
                                    <h6 class="text-muted fs-xs mb-1 text-uppercase">TOTAL ARTÍCULOS</h6>
                                    <h3 class="fw-bold mb-0">
                                        <span class="counter-value" data-target="{{ stats_bodega.total_articulos }}">0</span>
                                    </h3>
                                </div>
                                <a href="#" class="text-muted">
                                    <i class="ri-arrow-right-up-line fs-sm"></i>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-lg-3 col-sm-6">
                <div class="card report-card-modern">
                    <div class="card-body p-0 d-flex">
                        <div class="report-icon-section" style="--tb-info: #299cdb;" data-color="info">
                            <i class="ri-folder-line report-icon-large"></i>
                        </div>
                        <div class="report-content-section flex-grow-1">
                            <div class="d-flex justify-content-between align-items-start p-3">
                                <div>
                                    <h6 class="text-muted fs-xs mb-1 text-uppercase">CATEGORÍAS</h6>
                                    <h3 class="fw-bold mb-0">
                                        <span class="counter-value" data-target="{{ stats_bodega.total_categorias }}">0</span>
                                    </h3>
                                </div>
                                <a href="#" class="text-muted">
                                    <i class="ri-arrow-right-up-line fs-sm"></i>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-lg-3 col-sm-6">
                <div class="card report-card-modern">
                    <div class="card-body p-0 d-flex">
                        <div class="report-icon-section" style="--tb-secondary: #878a99;" data-color="secondary">
                            <i class="ri-arrow-left-right-line report-icon-large"></i>
                        </div>
                        <div class="report-content-section flex-grow-1">
                            <div class="d-flex justify-content-between align-items-start p-3">
                                <div>
                                    <h6 class="text-muted fs-xs mb-1 text-uppercase">MOVIMIENTOS</h6>
                                    <h3 class="fw-bold mb-0">
                                        <span class="counter-value" data-target="{{ stats_bodega.total_movimientos }}">0</span>
                                    </h3>
                                </div>
                                <a href="#" class="text-muted">
                                    <i class="ri-arrow-right-up-line fs-sm"></i>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-lg-3 col-sm-6">
                <div class="card report-card-modern">
                    <div class="card-body p-0 d-flex">
                        <div class="report-icon-section" style="--tb-success: #0ab39c;" data-color="success">
                            <i class="ri-archive-line report-icon-large"></i>
                        </div>
                        <div class="report-content-section flex-grow-1">
                            <div class="d-flex justify-content-between align-items-start p-3">
                                <div>
                                    <h6 class="text-muted fs-xs mb-1 text-uppercase">BODEGAS ACTIVAS</h6>
                                    <h3 class="fw-bold mb-0">
                                        <span class="counter-value" data-target="{{ stats_bodega.total_bodegas }}">0</span>
                                    </h3>
                                </div>
                                <a href="#" class="text-muted">
                                    <i class="ri-arrow-right-up-line fs-sm"></i>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
            {% endif %}
        {% endif %}

        <!-- SECCIÓN: COMPRAS -->
        {% if stats_compras %}
            {% if app == 'compras' or app == 'todas' %}
        <div class="row mb-5">
            <div class="col-12">
                <div class="report-section-header report-header-compras">
                    <div class="d-flex align-items-center">
                        <div class="report-header-icon">
                            <i class="ri-shopping-cart-line"></i>
                        </div>
                        <div>
                            <h3 class="report-section-title mb-0">Reportes de Compras</h3>
                            <p class="report-section-subtitle mb-0">Análisis completo del módulo de compras</p>
                        </div>
                    </div>
                </div>
                <!-- Accesos directos a reportes de Compras -->
                <div class="mb-3">
                    <div class="d-flex flex-wrap gap-2">
                        <a href="{% url 'reportes:oc_atrasadas_por_proveedor' %}" class="btn btn-sm btn-outline-success">
                            <i class="ri-error-warning-line me-1"></i> OC atrasadas por proveedor
                        </a>
                    </div>
                </div>
            </div>
        </div>
        <div class="row mb-4">
            <div class="col-lg-3 col-sm-6">
                <div class="card report-card-modern">
                    <div class="card-body p-0 d-flex">
                        <div class="report-icon-section" style="--tb-success: #0ab39c;" data-color="success">
                            <i class="ri-file-list-3-line report-icon-large"></i>
                        </div>
                        <div class="report-content-section flex-grow-1">
                            <div class="d-flex justify-content-between align-items-start p-3">
                                <div>
                                    <h6 class="text-muted fs-xs mb-1 text-uppercase">TOTAL ÓRDENES</h6>
                                    <h3 class="fw-bold mb-0">
                                        <span class="counter-value" data-target="{{ stats_compras.total_ordenes }}">0</span>
                                    </h3>
                                </div>
                                <a href="#" class="text-muted">
                                    <i class="ri-arrow-right-up-line fs-sm"></i>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-lg-3 col-sm-6">
                <div class="card report-card-modern">
                    <div class="card-body p-0 d-flex">
                        <div class="report-icon-section" style="--tb-warning: #f7b84b;" data-color="warning">
                            <i class="ri-time-line report-icon-large"></i>
                        </div>
                        <div class="report-content-section flex-grow-1">
                            <div class="d-flex justify-content-between align-items-start p-3">
                                <div>
                                    <h6 class="text-muted fs-xs mb-1 text-uppercase">PENDIENTES</h6>
                                    <h3 class="fw-bold mb-0">
                                        <span class="counter-value" data-target="{{ stats_compras.ordenes_pendientes }}">0</span>
                                    </h3>
                                </div>
                                <a href="#" class="text-muted">
                                    <i class="ri-arrow-right-up-line fs-sm"></i>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-lg-3 col-sm-6">
                <div class="card report-card-modern">
                    <div class="card-body p-0 d-flex">
                        <div class="report-icon-section" style="--tb-info: #299cdb;" data-color="info">
                            <i class="ri-inbox-archive-line report-icon-large"></i>
                        </div>
                        <div class="report-content-section flex-grow-1">
                            <div class="d-flex justify-content-between align-items-start p-3">
                                <div>
                                    <h6 class="text-muted fs-xs mb-1 text-uppercase">RECEPCIONES ARTÍCULOS</h6>
                                    <h3 class="fw-bold mb-0">
                                        <span class="counter-value" data-target="{{ stats_compras.recepciones_articulos }}">0</span>
                                    </h3>
                                </div>
                                <a href="#" class="text-muted">
                                    <i class="ri-arrow-right-up-line fs-sm"></i>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-lg-3 col-sm-6">
                <div class="card report-card-modern">
                    <div class="card-body p-0 d-flex">
                        <div class="report-icon-section" style="--tb-primary: #405189;" data-color="primary">
                            <i class="ri-building-line report-icon-large"></i>
                        </div>
                        <div class="report-content-section flex-grow-1">
                            <div class="d-flex justify-content-between align-items-start p-3">
                                <div>
                                    <h6 class="text-muted fs-xs mb-1 text-uppercase">RECEPCIONES BIENES</h6>
                                    <h3 class="fw-bold mb-0">
                                        <span class="counter-value" data-target="{{ stats_compras.recepciones_activos }}">0</span>
                                    </h3>
                                </div>
                                <a href="#" class="text-muted">
                                    <i class="ri-arrow-right-up-line fs-sm"></i>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
            {% endif %}
        {% endif %}

        <!-- SECCIÓN: SOLICITUDES -->
        {% if stats_solicitudes %}
            {% if app == 'solicitudes' or app == 'todas' %}
        <div class="row mb-5">
            <div class="col-12">
                <div class="report-section-header report-header-solicitudes">
                    <div class="d-flex align-items-center">
                        <div class="report-header-icon">
                            <i class="ri-file-text-line"></i>
                        </div>
                        <div>
                            <h3 class="report-section-title mb-0">Reportes de Solicitudes</h3>
                            <p class="report-section-subtitle mb-0">Resumen detallado de solicitudes del sistema</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row mb-4">
            <div class="col-lg-3 col-sm-6">
                <div class="card report-card-modern">
                    <div class="card-body p-0 d-flex">
                        <div class="report-icon-section" style="--tb-info: #299cdb;" data-color="info">
                            <i class="ri-file-list-3-line report-icon-large"></i>
                        </div>
                        <div class="report-content-section flex-grow-1">
                            <div class="d-flex justify-content-between align-items-start p-3">
                                <div>
                                    <h6 class="text-muted fs-xs mb-1 text-uppercase">TOTAL SOLICITUDES</h6>
                                    <h3 class="fw-bold mb-0">
                                        <span class="counter-value" data-target="{{ stats_solicitudes.total_solicitudes }}">0</span>
                                    </h3>
                                </div>
                                <a href="#" class="text-muted">
                                    <i class="ri-arrow-right-up-line fs-sm"></i>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-lg-3 col-sm-6">
                <div class="card report-card-modern">
                    <div class="card-body p-0 d-flex">
                        <div class="report-icon-section" style="--tb-warning: #f7b84b;" data-color="warning">
                            <i class="ri-time-line report-icon-large"></i>
                        </div>
                        <div class="report-content-section flex-grow-1">
                            <div class="d-flex justify-content-between align-items-start p-3">
                                <div>
                                    <h6 class="text-muted fs-xs mb-1 text-uppercase">PENDIENTES</h6>
                                    <h3 class="fw-bold mb-0">
                                        <span class="counter-value" data-target="{{ stats_solicitudes.solicitudes_pendientes }}">0</span>
                                    </h3>
                                </div>
                                <a href="#" class="text-muted">
                                    <i class="ri-arrow-right-up-line fs-sm"></i>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-lg-3 col-sm-6">
                <div class="card report-card-modern">
                    <div class="card-body p-0 d-flex">
                        <div class="report-icon-section" style="--tb-primary: #405189;" data-color="primary">
                            <i class="ri-building-line report-icon-large"></i>
                        </div>
                        <div class="report-content-section flex-grow-1">
                            <div class="d-flex justify-content-between align-items-start p-3">
                                <div>
                                    <h6 class="text-muted fs-xs mb-1 text-uppercase">SOLICITUD ACTIVOS</h6>
                                    <h3 class="fw-bold mb-0">
                                        <span class="counter-value" data-target="{{ stats_solicitudes.solicitudes_activos }}">0</span>
                                    </h3>
                                </div>
                                <a href="#" class="text-muted">
                                    <i class="ri-arrow-right-up-line fs-sm"></i>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-lg-3 col-sm-6">
                <div class="card report-card-modern">
                    <div class="card-body p-0 d-flex">
                        <div class="report-icon-section" style="--tb-secondary: #878a99;" data-color="secondary">
                            <i class="ri-box-3-line report-icon-large"></i>
                        </div>
                        <div class="report-content-section flex-grow-1">
                            <div class="d-flex justify-content-between align-items-start p-3">
                                <div>
                                    <h6 class="text-muted fs-xs mb-1 text-uppercase">SOLICITUD ARTÍCULOS</h6>
                                    <h3 class="fw-bold mb-0">
                                        <span class="counter-value" data-target="{{ stats_solicitudes.solicitudes_articulos }}">0</span>
                                    </h3>
                                </div>
                                <a href="#" class="text-muted">
                                    <i class="ri-arrow-right-up-line fs-sm"></i>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
            {% endif %}
        {% endif %}

        <!-- SECCIÓN: ACTIVOS -->
        {% if stats_activos %}
            {% if app == 'activos' or app == 'todas' %}
        <div class="row mb-5">
            <div class="col-12">
                <div class="report-section-header report-header-activos">
                    <div class="d-flex align-items-center">
                        <div class="report-header-icon">
                            <i class="ri-box-3-line"></i>
                        </div>
                        <div>
                            <h3 class="report-section-title mb-0">Reportes de Activos</h3>
                            <p class="report-section-subtitle mb-0">Control y gestión de activos fijos</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row mb-4">
            <div class="col-lg-3 col-sm-6">
                <div class="card report-card-modern">
                    <div class="card-body p-0 d-flex">
                        <div class="report-icon-section" style="--tb-warning: #f7b84b;">
                            <i class="ri-box-3-line report-icon-large"></i>
                        </div>
                        <div class="report-content-section flex-grow-1">
                            <div class="d-flex justify-content-between align-items-start p-3">
                                <div>
                                    <h6 class="text-muted fs-xs mb-1 text-uppercase">TOTAL ACTIVOS</h6>
                                    <h3 class="fw-bold mb-0">
                                        <span class="counter-value" data-target="{{ stats_activos.total_activos }}">0</span>
                                    </h3>
                                </div>
                                <a href="#" class="text-muted">
                                    <i class="ri-arrow-right-up-line fs-sm"></i>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-lg-3 col-sm-6">
                <div class="card report-card-modern">
                    <div class="card-body p-0 d-flex">
                        <div class="report-icon-section" style="--tb-info: #299cdb;" data-color="info">
                            <i class="ri-folder-line report-icon-large"></i>
                        </div>
                        <div class="report-content-section flex-grow-1">
                            <div class="d-flex justify-content-between align-items-start p-3">
                                <div>
                                    <h6 class="text-muted fs-xs mb-1 text-uppercase">CATEGORÍAS</h6>
                                    <h3 class="fw-bold mb-0">
                                        <span class="counter-value" data-target="{{ stats_activos.total_categorias }}">0</span>
                                    </h3>
                                </div>
                                <a href="#" class="text-muted">
                                    <i class="ri-arrow-right-up-line fs-sm"></i>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-lg-3 col-sm-6">
                <div class="card report-card-modern">
                    <div class="card-body p-0 d-flex">
                        <div class="report-icon-section" style="--tb-success: #0ab39c;" data-color="success">
                            <i class="ri-map-pin-line report-icon-large"></i>
                        </div>
                        <div class="report-content-section flex-grow-1">
                            <div class="d-flex justify-content-between align-items-start p-3">
                                <div>
                                    <h6 class="text-muted fs-xs mb-1 text-uppercase">UBICACIONES</h6>
                                    <h3 class="fw-bold mb-0">
                                        <span class="counter-value" data-target="{{ stats_activos.total_ubicaciones }}">0</span>
                                    </h3>
                                </div>
                                <a href="#" class="text-muted">
                                    <i class="ri-arrow-right-up-line fs-sm"></i>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
            {% endif %}
        {% endif %}

        <!-- SECCIÓN: BAJAS -->
        {% if stats_bajas %}
            {% if app == 'bajas' or app == 'todas' %}
        <div class="row mb-5">
            <div class="col-12">
                <div class="report-section-header report-header-bajas">
                    <div class="d-flex align-items-center">
                        <div class="report-header-icon">
                            <i class="ri-delete-bin-line"></i>
                        </div>
                        <div>
                            <h3 class="report-section-title mb-0">Reportes de Bajas</h3>
                            <p class="report-section-subtitle mb-0">Registro de bajas de inventario</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row mb-4">
            <div class="col-lg-3 col-sm-6">
                <div class="card report-card-modern">
                    <div class="card-body p-0 d-flex">
                        <div class="report-icon-section" style="--tb-danger: #f06548;" data-color="danger">
                            <i class="ri-delete-bin-line report-icon-large"></i>
                        </div>
                        <div class="report-content-section flex-grow-1">
                            <div class="d-flex justify-content-between align-items-start p-3">
                                <div>
                                    <h6 class="text-muted fs-xs mb-1 text-uppercase">TOTAL BAJAS</h6>
                                    <h3 class="fw-bold mb-0">
                                        <span class="counter-value" data-target="{{ stats_bajas.total_bajas }}">0</span>
                                    </h3>
                                </div>
                                <a href="#" class="text-muted">
                                    <i class="ri-arrow-right-up-line fs-sm"></i>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
            {% endif %}
        {% endif %}

        <!-- Mensaje si no hay datos -->
        {% if app != 'todas' and not stats_bodega and not stats_compras and not stats_solicitudes and not stats_activos and not stats_bajas %}
        <div class="row">
            <div class="col-12">
                <div class="alert alert-info" role="alert">
                    <i class="ri-information-line me-2"></i>
                    No hay datos disponibles para el módulo seleccionado.
                </div>
            </div>
        </div>
        {% endif %}

    </div>
    <!-- container-fluid -->
</div>
<!-- End Page-content -->
{% endblock %}

{% block extra_css %}
{{ block.super }}
<style>
    /* Animación de carga para las cards */
    .card {
        position: relative;
        overflow: hidden;
        animation: cardFadeIn 0.6s ease-out forwards;
        opacity: 0;
        transform: translateY(20px);
    }
    
    @keyframes cardFadeIn {
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }
    
    /* Delay escalonado para cada card */
    .card:nth-child(1) { animation-delay: 0.1s; }
    .card:nth-child(2) { animation-delay: 0.2s; }
    .card:nth-child(3) { animation-delay: 0.3s; }
    .card:nth-child(4) { animation-delay: 0.4s; }
    
    /* Sección del icono (izquierda) - estilo impresionante */
    .report-icon-section {
        width: 90px;
        min-width: 90px;
        display: flex;
        align-items: center;
        justify-content: center;
        position: relative;
        border-radius: 12px 0 0 12px;
        overflow: hidden;
        background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
        border-right: 2px solid #e1e5e9;
    }
    
    .report-icon-section::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(64, 81, 137, 0.03);
        opacity: 0;
        transition: opacity 0.3s ease;
    }
    
    .card:hover .report-icon-section::before {
        opacity: 1;
    }
    
    /* Icono estilo impresionante */
    .report-icon-large {
        font-size: 2.5rem;
        position: relative;
        z-index: 1;
        animation: iconFadeInScale 0.6s ease-out 0.2s forwards;
        opacity: 0;
        transform: scale(0.9);
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.1));
    }
    
    /* Colores institucionales para los iconos */
    .report-icon-section[data-color="primary"] .report-icon-large,
    .report-icon-section[style*="primary"] .report-icon-large {
        color: #405189;
    }
    
    .report-icon-section[data-color="info"] .report-icon-large,
    .report-icon-section[style*="info"] .report-icon-large {
        color: #299cdb;
    }
    
    .report-icon-section[data-color="success"] .report-icon-large,
    .report-icon-section[style*="success"] .report-icon-large {
        color: #0ab39c;
    }
    
    .report-icon-section[data-color="warning"] .report-icon-large,
    .report-icon-section[style*="warning"] .report-icon-large {
        color: #f7b84b;
    }
    
    .report-icon-section[data-color="secondary"] .report-icon-large,
    .report-icon-section[style*="secondary"] .report-icon-large {
        color: #6c757d;
    }
    
    .report-icon-section[data-color="danger"] .report-icon-large,
    .report-icon-section[style*="danger"] .report-icon-large {
        color: #f06548;
    }
    
    @keyframes iconFadeInScale {
        to {
            opacity: 1;
            transform: scale(1);
        }
    }
    
    .card:hover .report-icon-large {
        transform: scale(1.15) rotate(5deg);
        filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.2));
    }
    
    /* Sección de contenido (derecha) */
    .report-content-section {
        background: white;
        border-radius: 0 8px 8px 0;
    }
    
    /* Efecto de borde animado al hover */
    .card {
        border: 2px solid transparent;
        transition: border-color 0.3s ease;
    }
    
    .card::before {
        content: '';
        position: absolute;
        top: -2px;
        left: -2px;
        right: -2px;
        bottom: -2px;
        border-radius: inherit;
        background: linear-gradient(45deg, 
            #405189, 
            #0ab39c, 
            #299cdb, 
            #f7b84b,
            #405189);
        background-size: 400% 400%;
        opacity: 0;
        z-index: -1;
        transition: opacity 0.3s ease;
        animation: borderRotate 3s linear infinite;
    }
    
    .card:hover::before {
        opacity: 1;
    }
    
    @keyframes borderRotate {
        0% {
            background-position: 0% 50%;
        }
        50% {
            background-position: 100% 50%;
        }
        100% {
            background-position: 0% 50%;
        }
    }
    
    /* Asegurar que el contenido esté por encima del borde */
    .card-body {
        position: relative;
        z-index: 1;
        background: white;
        border-radius: inherit;
    }
    
    /* Efecto de elevación al hover */
    .card:hover {
        transform: translateY(-8px);
        box-shadow: 0 12px 30px rgba(0, 0, 0, 0.15) !important;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    /* Icono más visible al hover */
    .card:hover .report-icon {
        opacity: 0.6;
        transform: scale(1.1);
    }
    
    /* Animación de entrada para el icono */
    .report-icon {
        animation: iconFadeIn 0.8s ease-out 0.3s forwards, iconPulse 2s ease-in-out 1.1s infinite;
        opacity: 0;
        transform: scale(0.8);
    }
    
    @keyframes iconFadeIn {
        to {
            opacity: 0.4;
            transform: scale(1);
        }
    }
    
    /* Card estilo impresionante */
    .report-card-modern {
        border-radius: 12px;
        overflow: hidden;
        border: 2px solid #e1e5e9;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08), 0 2px 4px rgba(0, 0, 0, 0.06);
        background: white;
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        position: relative;
    }
    
    .report-card-modern::after {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(135deg, rgba(30, 58, 138, 0.03) 0%, rgba(10, 179, 156, 0.03) 100%);
        opacity: 0;
        transition: opacity 0.3s ease;
        pointer-events: none;
    }
    
    .report-card-modern:hover {
        box-shadow: 0 12px 32px rgba(0, 0, 0, 0.15), 0 4px 8px rgba(0, 0, 0, 0.1);
        border-color: #1e3a8a;
        transform: translateY(-6px) scale(1.02);
    }
    
    .report-card-modern:hover::after {
        opacity: 1;
    }
    
    /* Títulos estilo impresionante */
    .report-content-section h6 {
        font-size: 0.8125rem;
        letter-spacing: 0.5px;
        font-weight: 700;
        color: #495057;
        text-transform: uppercase;
        margin-bottom: 0.75rem !important;
    }
    
    .report-content-section h3 {
        font-size: 2.5rem;
        font-weight: 800;
        color: #1e3a8a;
        letter-spacing: -0.5px;
        line-height: 1.1;
        background: linear-gradient(135deg, #1e3a8a 0%, #0ab39c 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
    }
    
    /* Padding más generoso */
    .report-content-section .p-3 {
        padding: 1.5rem !important;
    }
    
    /* Headers de sección impresionantes */
    .report-section-header {
        background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
        border-left: 5px solid;
        border-radius: 12px;
        padding: 1.5rem 2rem;
        margin-bottom: 2rem;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
        position: relative;
        overflow: hidden;
    }
    
    .report-section-header::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 4px;
        background: linear-gradient(90deg, transparent 0%, currentColor 50%, transparent 100%);
        opacity: 0.3;
    }
    
    .report-header-bodega {
        border-left-color: #405189;
        color: #405189;
    }
    
    .report-header-compras {
        border-left-color: #0ab39c;
        color: #0ab39c;
    }
    
    .report-header-solicitudes {
        border-left-color: #299cdb;
        color: #299cdb;
    }
    
    .report-header-activos {
        border-left-color: #f7b84b;
        color: #f7b84b;
    }
    
    .report-header-bajas {
        border-left-color: #f06548;
        color: #f06548;
    }
    
    .report-header-icon {
        width: 60px;
        height: 60px;
        border-radius: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
        margin-right: 1.5rem;
        font-size: 2rem;
        background: linear-gradient(135deg, currentColor 0%, rgba(255, 255, 255, 0.1) 100%);
        color: inherit;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }
    
    .report-section-title {
        font-size: 1.75rem;
        font-weight: 700;
        color: #212529;
        letter-spacing: -0.3px;
        margin-bottom: 0.25rem !important;
    }
    
    .report-section-subtitle {
        font-size: 0.9375rem;
        color: #6c757d;
        font-weight: 400;
    }
    
    /* Efecto de brillo en hover para cards */
    .report-card-modern::before {
        content: '';
        position: absolute;
        top: -50%;
        left: -50%;
        width: 200%;
        height: 200%;
        background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.3), transparent);
        transform: rotate(45deg);
        transition: all 0.6s ease;
        opacity: 0;
        z-index: 1;
    }
    
    .report-card-modern:hover::before {
        opacity: 1;
        animation: shine 0.6s ease;
    }
    
    @keyframes shine {
        0% {
            transform: translateX(-100%) translateY(-100%) rotate(45deg);
        }
        100% {
            transform: translateX(100%) translateY(100%) rotate(45deg);
        }
    }
    
    /* Mejorar contador */
    .counter-value {
        display: inline-block;
        font-weight: 800;
    }
</style>
{% endblock %}

{% block extra_js %}
{{ block.super }}
<script>
document.addEventListener("DOMContentLoaded", function() {
    // Animación de contador para los valores
    function animateCounter(element) {
        const target = parseInt(element.getAttribute('data-target')) || 0;
        const duration = 1500; // 1.5 segundos
        const increment = target / (duration / 16); // 60 FPS
        let current = 0;
        
        const timer = setInterval(() => {
            current += increment;
            if (current >= target) {
                element.textContent = target;
                clearInterval(timer);
            } else {
                element.textContent = Math.floor(current);
            }
        }, 16);
    }
    
    // Aplicar animación a todos los contadores
    document.querySelectorAll('.counter-value').forEach(counter => {
        animateCounter(counter);
    });
});
</script>
{% endblock %}

