{% comment %}
Fragmento reutilizable para mostrar una tabla simple de reportes.
SRP: solo presentaci√≥n.
Requiere en contexto: report (ReportResult)
{% endcomment %}
<div class="card">
  <div class="card-header d-flex justify-content-between align-items-center">
    <h5 class="mb-0">{{ report.title }}</h5>
    <div>
      <a class="btn btn-sm btn-outline-secondary" href="?{% if request.GET %}{{ request.GET.urlencode }}&{% endif %}format=pdf">PDF</a>
      <a class="btn btn-sm btn-outline-secondary" href="?{% if request.GET %}{{ request.GET.urlencode }}&{% endif %}format=xlsx">Excel</a>
    </div>
  </div>
  <div class="card-body">
    {% if report.filters_summary %}
      <p class="text-muted small">
        {% for k,v in report.filters_summary.items %}
          <strong>{{ k }}:</strong> {{ v }}{% if not forloop.last %} | {% endif %}
        {% endfor %}
      </p>
    {% endif %}
    <div class="table-responsive">
      <table class="table table-sm table-striped table-bordered align-middle">
        <thead>
          <tr>
            {% for col in report.columns %}
              <th>{{ col }}</th>
            {% endfor %}
          </tr>
        </thead>
        <tbody>
          {% for row in report.rows %}
            <tr>
              {% for cell in row %}
                <td>{{ cell }}</td>
              {% endfor %}
            </tr>
          {% empty %}
            <tr><td colspan="{{ report.columns|length }}" class="text-center text-muted">Sin resultados</td></tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>


